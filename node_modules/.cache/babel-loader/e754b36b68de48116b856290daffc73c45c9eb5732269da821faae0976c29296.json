{"ast":null,"code":"import PaginationComponent from '../../components/PaginationComponent.vue';\nimport { summaryFields } from '../../Data/SummaryFields.js';\n// import approval from '../../Data/approval.js'\nimport ApprovalRequestService from '@/serviceLayer/ApprovalRequestService';\nimport { mapGetters } from 'vuex';\nexport default {\n  name: 'ApprovalRequestPage',\n  components: {\n    PaginationComponent\n  },\n  data() {\n    return {\n      rows: 100,\n      perPage: 1,\n      currentPage: 5,\n      fields: summaryFields,\n      listItems: [],\n      EmpName: [],\n      selectedEmpName: '',\n      selectedToDate: '',\n      selectedFromDate: '',\n      selectedStatus: '',\n      status: Object.freeze({\n        APPROVED: 'Approved',\n        WAITING_FOR_APPROVAL: 'Pending'\n      }),\n      loader: false\n    };\n  },\n  computed: {\n    ...mapGetters('authStore', ['getUser'])\n  },\n  mounted() {\n    let user = this.getUser;\n    console.log(user);\n    ApprovalRequestService.fetchSubordinates({\n      data: {\n        empCode: user?.empCode\n      },\n      success: res => {\n        console.log(res);\n        this.EmpName = res.data;\n      },\n      fail: err => {\n        console.log(err);\n      }\n    });\n  },\n  methods: {\n    // changeStatus(status) {\n    //   this.selectedStatus = status;\n    // },\n\n    pageNo(page) {\n      console.log(page);\n    },\n    getApprovals() {\n      this.loader = true;\n      let status = Object.keys(this.status).find(key => key === this.selectedStatus);\n      console.log(status);\n      let empCode = this.selectedEmpName.split('-');\n      const data = {\n        empCode: empCode[0],\n        fromDate: this.selectedFromDate,\n        toDate: this.selectedToDate,\n        statusString: status\n      };\n      console.log(data);\n      ApprovalRequestService.fetchApprovals({\n        data: data,\n        success: res => {\n          this.loader = false;\n          console.log(res.data);\n          this.listItems = res.data;\n        },\n        fail: err => {\n          // alert(\"Please try again later\")\n          this.loader = false;\n          console.log(err);\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["PaginationComponent","summaryFields","ApprovalRequestService","mapGetters","name","components","data","rows","perPage","currentPage","fields","listItems","EmpName","selectedEmpName","selectedToDate","selectedFromDate","selectedStatus","status","Object","freeze","APPROVED","WAITING_FOR_APPROVAL","loader","computed","mounted","user","getUser","console","log","fetchSubordinates","empCode","success","res","fail","err","methods","pageNo","page","getApprovals","keys","find","key","split","fromDate","toDate","statusString","fetchApprovals"],"sources":["/Users/jaisri/Downloads/attendance-portal-master/src/pages/js/approvalrequest.js"],"sourcesContent":["import PaginationComponent from '../../components/PaginationComponent.vue'\nimport {summaryFields} from '../../Data/SummaryFields.js';\n// import approval from '../../Data/approval.js'\nimport ApprovalRequestService from '@/serviceLayer/ApprovalRequestService';\nimport { mapGetters } from 'vuex';\nexport default{\n    name:'ApprovalRequestPage',\n    components:{\n        PaginationComponent\n      },\n      data() {\n        return {\n          rows: 100,\n          perPage: 1,\n          currentPage: 5,\n          fields:summaryFields,\n          listItems:[],\n          EmpName:[],\n          selectedEmpName:'',\n          selectedToDate:'',\n          selectedFromDate:'',\n          selectedStatus:'',\n          status:Object.freeze({\n            APPROVED: 'Approved',\n            WAITING_FOR_APPROVAL: 'Pending',\n          }),\n          loader:false\n        }\n      },\n      computed:{\n          ...mapGetters('authStore',['getUser'])\n      },\n      mounted(){\n          let user=this.getUser;\n          console.log(user)\n          ApprovalRequestService.fetchSubordinates({\n            data:{empCode:user?.empCode},\n            success:(res)=>{\n                console.log(res);\n                this.EmpName=res.data;\n            },\n            fail:(err)=>{\n              console.log(err)\n            }\n          })\n      },\n      methods:{\n\n        // changeStatus(status) {\n        //   this.selectedStatus = status;\n        // },\n\n        pageNo(page)\n        {\n          console.log(page)\n        },\n        \n        getApprovals(){\n          this.loader=true;\n          let status=Object.keys(this.status).find(\n            key => key === this.selectedStatus\n          );\n          console.log(status)\n          let empCode=this.selectedEmpName.split('-');\n          const data={\n            empCode:empCode[0],\n            fromDate:this.selectedFromDate,\n            toDate:this.selectedToDate,\n            statusString:status\n          }\n          console.log(data);\n          ApprovalRequestService.fetchApprovals({\n            data:data,\n            success:(res)=>{\n              this.loader=false;\n              console.log(res.data)\n              this.listItems=res.data\n            },\n            fail:(err)=>{\n              // alert(\"Please try again later\")\n              this.loader=false;\n              console.log(err)\n            }\n          })\n        }\n      }\n}"],"mappings":"AAAA,OAAOA,mBAAmB,MAAM,0CAA0C;AAC1E,SAAQC,aAAa,QAAO,6BAA6B;AACzD;AACA,OAAOC,sBAAsB,MAAM,uCAAuC;AAC1E,SAASC,UAAU,QAAQ,MAAM;AACjC,eAAc;EACVC,IAAI,EAAC,qBAAqB;EAC1BC,UAAU,EAAC;IACPL;EACF,CAAC;EACDM,IAAI,GAAG;IACL,OAAO;MACLC,IAAI,EAAE,GAAG;MACTC,OAAO,EAAE,CAAC;MACVC,WAAW,EAAE,CAAC;MACdC,MAAM,EAACT,aAAa;MACpBU,SAAS,EAAC,EAAE;MACZC,OAAO,EAAC,EAAE;MACVC,eAAe,EAAC,EAAE;MAClBC,cAAc,EAAC,EAAE;MACjBC,gBAAgB,EAAC,EAAE;MACnBC,cAAc,EAAC,EAAE;MACjBC,MAAM,EAACC,MAAM,CAACC,MAAM,CAAC;QACnBC,QAAQ,EAAE,UAAU;QACpBC,oBAAoB,EAAE;MACxB,CAAC,CAAC;MACFC,MAAM,EAAC;IACT,CAAC;EACH,CAAC;EACDC,QAAQ,EAAC;IACL,GAAGpB,UAAU,CAAC,WAAW,EAAC,CAAC,SAAS,CAAC;EACzC,CAAC;EACDqB,OAAO,GAAE;IACL,IAAIC,IAAI,GAAC,IAAI,CAACC,OAAO;IACrBC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;IACjBvB,sBAAsB,CAAC2B,iBAAiB,CAAC;MACvCvB,IAAI,EAAC;QAACwB,OAAO,EAACL,IAAI,EAAEK;MAAO,CAAC;MAC5BC,OAAO,EAAEC,GAAG,IAAG;QACXL,OAAO,CAACC,GAAG,CAACI,GAAG,CAAC;QAChB,IAAI,CAACpB,OAAO,GAACoB,GAAG,CAAC1B,IAAI;MACzB,CAAC;MACD2B,IAAI,EAAEC,GAAG,IAAG;QACVP,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC;MAClB;IACF,CAAC,CAAC;EACN,CAAC;EACDC,OAAO,EAAC;IAEN;IACA;IACA;;IAEAC,MAAM,CAACC,IAAI,EACX;MACEV,OAAO,CAACC,GAAG,CAACS,IAAI,CAAC;IACnB,CAAC;IAEDC,YAAY,GAAE;MACZ,IAAI,CAAChB,MAAM,GAAC,IAAI;MAChB,IAAIL,MAAM,GAACC,MAAM,CAACqB,IAAI,CAAC,IAAI,CAACtB,MAAM,CAAC,CAACuB,IAAI,CACtCC,GAAG,IAAIA,GAAG,KAAK,IAAI,CAACzB,cAAc,CACnC;MACDW,OAAO,CAACC,GAAG,CAACX,MAAM,CAAC;MACnB,IAAIa,OAAO,GAAC,IAAI,CAACjB,eAAe,CAAC6B,KAAK,CAAC,GAAG,CAAC;MAC3C,MAAMpC,IAAI,GAAC;QACTwB,OAAO,EAACA,OAAO,CAAC,CAAC,CAAC;QAClBa,QAAQ,EAAC,IAAI,CAAC5B,gBAAgB;QAC9B6B,MAAM,EAAC,IAAI,CAAC9B,cAAc;QAC1B+B,YAAY,EAAC5B;MACf,CAAC;MACDU,OAAO,CAACC,GAAG,CAACtB,IAAI,CAAC;MACjBJ,sBAAsB,CAAC4C,cAAc,CAAC;QACpCxC,IAAI,EAACA,IAAI;QACTyB,OAAO,EAAEC,GAAG,IAAG;UACb,IAAI,CAACV,MAAM,GAAC,KAAK;UACjBK,OAAO,CAACC,GAAG,CAACI,GAAG,CAAC1B,IAAI,CAAC;UACrB,IAAI,CAACK,SAAS,GAACqB,GAAG,CAAC1B,IAAI;QACzB,CAAC;QACD2B,IAAI,EAAEC,GAAG,IAAG;UACV;UACA,IAAI,CAACZ,MAAM,GAAC,KAAK;UACjBK,OAAO,CAACC,GAAG,CAACM,GAAG,CAAC;QAClB;MACF,CAAC,CAAC;IACJ;EACF;AACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}